openapi: 3.0.3
info:
  title: Tala Paints Platform API
  description: |
    Complete API documentation for Tala Paints e-commerce platform.
  version: 1.0.0
  contact:
    name: API Support
    email: support@talapaints.com

servers:
  - url: http://localhost:3000
    description: Local development server
  - url: https://talas-paints.onrender.com
    description: Production server

tags:
  - name: Health Check
    description: Server health monitoring
  - name: Products
    description: Product management operations (CRUD, search, filter)
  - name: Categories
    description: Category management operations (CRUD)
  - name: Cart
    description: Shopping cart operations

paths:
  # Health Check
  /api/health:
    $ref: "./swagger-products.yaml#/paths/~1health"

  # Products - CRUD
  /api/products:
    $ref: "./swagger-products.yaml#/paths/~1products"

  /api/products/{id}:
    $ref: "./swagger-products.yaml#/paths/~1products~1{id}"

  # Products - Search & Filter
  /api/products/search:
    $ref: "./swagger-products.yaml#/paths/~1products~1search"

  /api/products/filter:
    $ref: "./swagger-products.yaml#/paths/~1products~1filter"

  # Categories
  /api/categories:
    $ref: "./swagger-categories.yaml#/paths/~1categories"

  /api/categories/{id}:
    $ref: "./swagger-categories.yaml#/paths/~1categories~1{id}"

  # Cart - Main operations
  /api/cart/{phoneNumber}:
    $ref: "./swagger-cart.yaml#/paths/~1cart~1{phoneNumber}"

  # Cart - Item operations
  /api/cart/{phoneNumber}/items:
    $ref: "./swagger-cart.yaml#/paths/~1cart~1{phoneNumber}~1items"

  /api/cart/{phoneNumber}/items/{cartItemId}:
    $ref: "./swagger-cart.yaml#/paths/~1cart~1{phoneNumber}~1items~1{cartItemId}"

components:
  schemas:
    # Product schemas
    Product:
      $ref: "./swagger-products.yaml#/components/schemas/Product"
    
    # Cart schemas
    Cart:
      $ref: "./swagger-cart.yaml#/components/schemas/Cart"
    
    CartItem:
      $ref: "./swagger-cart.yaml#/components/schemas/CartItem"
    
    CartWithItems:
      $ref: "./swagger-cart.yaml#/components/schemas/CartWithItems"
    
    # Common schemas
    Error:
      $ref: "./swagger-products.yaml#/components/schemas/Error"

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token for authentication

# Global security (can be overridden per endpoint)
# security:
#   - BearerAuth: []
