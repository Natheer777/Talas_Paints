openapi: 3.0.3
info:
  title: Tala Paints Platform API
  description: |
    Complete API documentation for Tala Paints e-commerce platform.
  version: 1.0.0
  contact:
    name: API Support
    email: support@talapaints.com
servers:
  - url: 'http://localhost:3000'
    description: Local development server
  - url: 'https://talas-paints.onrender.com'
    description: Production server
tags:
  - name: Health Check
    description: Server health monitoring
  - name: Authentication
    description: Admin authentication and token management
  - name: Products
    description: 'Product management operations (CRUD, search, filter)'
  - name: Categories
    description: Category management operations (CRUD)
  - name: Orders
    description: Order management operations with real-time notifications
  - name: Offers
    description: Product offers and discounts management
  - name: Ads Cards
    description: Advertisement card management operations (CRUD)
  - name: Video Cards
    description: Video card management operations (CRUD)
  - name: Payment Methods
    description: Payment method management with QR code images
  - name: Notifications
    description: Firebase Cloud Messaging token registration for customers and admins
paths:
  /api/health:
    get:
      tags:
        - Health Check
      summary: Health check endpoint
      description: Check if the API server is running and healthy
      operationId: checkHealth
      responses:
        '200':
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: OK
                  timestamp:
                    type: string
                    format: date-time
                    example: '2025-06-22T18:46:00Z'
                  uptime:
                    type: number
                    description: Server uptime in seconds
                    example: 3600.5
  /api/auth/login:
    post:
      tags:
        - Authentication
      summary: Admin login check
      description: Verify admin credentials. No token is returned; use these credentials in headers for protected routes.
      operationId: loginAdmin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: admin@example.com
                password:
                  type: string
                  example: yourpassword
      responses:
        '200':
          description: Credentials are valid
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      admin:
                        type: object
                        properties:
                          id:
                            type: string
                            format: uuid
                          email:
                            type: string
        '401':
          description: Invalid credentials
  /api/products:
    post:
      tags:
        - Products
      summary: Create a new product
      description: Create a new product with optional image uploads.
      operationId: createProduct
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
                - description
                - category
                - sizes
                - status
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 255
                  example: Premium Interior Paint
                description:
                  type: string
                  minLength: 10
                  example: High-quality latex paint perfect for interior walls and ceilings
                category:
                  type: string
                  description: Category name (not category_id)
                  example: Interior Paints
                colors:
                  type: array
                  items:
                    type: string
                  description: Array of color names (optional)
                  example:
                    - Red
                    - Blue
                    - Green
                sizes:
                  type: array
                  items:
                    type: object
                    required:
                      - size
                      - price
                    properties:
                      size:
                        type: string
                        example: 1L
                      price:
                        type: number
                        format: float
                        example: 34.99
                  description: Array of available sizes and prices
                  example:
                    - size: 1L
                      price: 34.99
                    - size: 5L
                      price: 149.99
                status:
                  type: string
                  enum:
                    - visible
                    - hidden
                  description: Product visibility status
                  example: visible
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: 'Product images (JPEG, PNG, or WebP, unlimited files, 5MB each)'
      responses:
        '201':
          description: Product created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Product'
                  message:
                    type: string
                    example: Product created successfully
          headers:
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
        '400':
          description: Validation error or product already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                validationError:
                  value:
                    success: false
                    errors:
                      - msg: Name is required and must be a string
                        param: name
                        location: body
                duplicateProduct:
                  value:
                    success: false
                    message: Product already exists
        '429':
          description: Too Many Requests
          headers:
            Retry-After:
              $ref: '#/components/headers/RetryAfter'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RateLimitError'
    get:
      tags:
        - Products
      summary: Get all products with pagination
      description: Retrieve a list of all products ordered by creation date (newest first). Supports pagination when page and/or limit parameters are provided.
      operationId: getAllProducts
      parameters:
        - name: page
          in: query
          required: false
          description: Page number for pagination (starts from 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of products per page (1-100, default 10)'
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        '200':
          description: Products retrieved successfully
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Product'
                      count:
                        type: integer
                        description: Total number of products returned
                        example: 5
                    required:
                      - success
                      - data
                      - count
                  - $ref: '#/paths/~1api~1admin~1products/get/responses/200/content/application~1json/schema'
          headers:
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
        '429':
          description: Too Many Requests
          headers:
            Retry-After:
              $ref: '#/components/headers/RetryAfter'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RateLimitError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/products/all:
    get:
      tags:
        - Products
      summary: Get all products (without pagination)
      description: Retrieve a complete list of all products ordered by creation date (newest first). This endpoint returns all products in a single response without pagination.
      operationId: getAllProductsWithoutPagination
      responses:
        '200':
          description: All products retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
                  count:
                    type: integer
                    description: Total number of products
                    example: 150
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/products/visible:
    get:
      tags:
        - Products
      summary: Get visible products with pagination (Public)
      description: Retrieve a list of products with status 'visible' ordered by creation date (newest first). Supports pagination when page and/or limit parameters are provided.
      operationId: getVisibleProducts
      parameters:
        - name: page
          in: query
          required: false
          description: Page number for pagination (starts from 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of products per page (1-100, default 10)'
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        '200':
          description: Visible products retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1admin~1products/get/responses/200/content/application~1json/schema'
          headers:
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
        '429':
          description: Too Many Requests
          headers:
            Retry-After:
              $ref: '#/components/headers/RetryAfter'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RateLimitError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/api/products/{id}':
    get:
      tags:
        - Products
      summary: Get product by ID
      description: Retrieve a single product by unique identifier
      operationId: getProductById
      parameters:
        - name: id
          in: path
          required: true
          description: Product UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Product retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Product'
        '400':
          description: Invalid product ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Product not found
    put:
      tags:
        - Products
      summary: Update product
      description: Update an existing product. All fields optional.
      operationId: updateProduct
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Product UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Updated Premium Paint
                description:
                  type: string
                  example: Updated description with new features
                category:
                  type: string
                  description: Category name (not category_id)
                  example: Interior Paints
                colors:
                  type: array
                  items:
                    type: string
                  example:
                    - Red
                    - Blue
                    - Green
                    - Yellow
                sizes:
                  type: array
                  items:
                    type: object
                    properties:
                      size:
                        type: string
                        example: 1L
                      price:
                        type: number
                        format: float
                        example: 34.99
                  example:
                    - size: 1L
                      price: 34.99
                    - size: 5L
                      price: 149.99
                status:
                  type: string
                  enum:
                    - visible
                    - hidden
                  example: visible
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: 'New product images to upload (JPEG, PNG, or WebP, unlimited files, 5MB each)'
                keepExistingImages:
                  type: string
                  enum:
                    - 'true'
                    - 'false'
                  description: 'Whether to keep existing images when uploading new ones. If false, all existing images will be deleted.'
                  example: 'true'
                imagesToDelete:
                  type: array
                  items:
                    type: string
                  description: Array of image URLs to delete from the product. Only images belonging to this product will be deleted.
                  example:
                    - 'https://bucket.s3.us-east-1.amazonaws.com/products/550e8400.../uuid1.jpg'
                    - 'https://bucket.s3.us-east-1.amazonaws.com/products/550e8400.../uuid2.jpg'
      responses:
        '200':
          description: Product updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Product'
                  message:
                    type: string
                    example: Product updated successfully
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                  error:
                    type: string
                  hint:
                    type: string
                  receivedValue:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
                  path:
                    type: string
              examples:
                invalidSizesFormat:
                  summary: Invalid sizes JSON format
                  value:
                    success: false
                    message: Invalid sizes format
                    error: 'The ''sizes'' field must be a valid JSON array. Example: [{"size":"1L","price":34.99}]'
                    receivedValue: '[{"size":"1L","price":34.99'
                    hint: Make sure to send sizes as a properly formatted JSON string
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
                invalidSizesType:
                  summary: Sizes is not an array
                  value:
                    success: false
                    message: Invalid sizes format
                    error: The 'sizes' field must be an array
                    receivedType: string
                    expectedFormat: Array of objects with 'size' and 'price' properties
                    example: '[{"size":"1L","price":34.99},{"size":"5L","price":149.99}]'
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
                emptySizesArray:
                  summary: Empty sizes array
                  value:
                    success: false
                    message: Invalid sizes data
                    error: The 'sizes' array cannot be empty. At least one size must be provided.
                    hint: 'Add at least one size with format: {"size":"1L","price":34.99}'
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
                invalidSizeObject:
                  summary: Size object missing required fields
                  value:
                    success: false
                    message: Invalid size object structure
                    error: Size at index 0 is missing required fields
                    receivedObject:
                      size: 1L
                    requiredFields:
                      - size
                      - price
                    example: '{"size":"1L","price":34.99}'
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
                invalidPriceValue:
                  summary: Price is not a valid number
                  value:
                    success: false
                    message: Invalid price value
                    error: Price at index 0 must be a positive number
                    receivedPrice: '34.99'
                    hint: 'Price should be a number like 34.99, not a string'
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
                productNameExists:
                  summary: Product name already exists
                  value:
                    success: false
                    message: Product with this name already exists
                    error: Product with this name already exists
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
                categoryNotFound:
                  summary: Category not found
                  value:
                    success: false
                    message: Category not found
                    error: Category not found
                    timestamp: '2025-12-25T14:03:45.000Z'
                    path: /api/products/a766a1b9-dda1-4c13-88f6-7859a76f5959
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Product not found
                  error:
                    type: string
                    example: Product not found
                  timestamp:
                    type: string
                    format: date-time
                  path:
                    type: string
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Internal server error
                  error:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
                  path:
                    type: string
    delete:
      tags:
        - Products
      summary: Delete product
      description: Delete a product and its associated images from AWS S3
      operationId: deleteProduct
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Product UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Product deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Product deleted successfully
        '400':
          description: Invalid product ID or deletion failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Product not found
  /api/admin/products:
    get:
      tags:
        - Products
      summary: Get all products with pagination (Admin)
      description: Retrieve a list of all products (including hidden/drafts) ordered by creation date (newest first). Requires admin authentication.
      operationId: getAdminProducts
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: page
          in: query
          required: false
          description: Page number for pagination (starts from 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of products per page (1-100, default 10)'
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        '200':
          description: All products retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        description: Current page number
                        example: 1
                      limit:
                        type: integer
                        description: Items per page
                        example: 10
                      total:
                        type: integer
                        description: Total number of products
                        example: 25
                      totalPages:
                        type: integer
                        description: Total number of pages
                        example: 3
                      hasNextPage:
                        type: boolean
                        description: Whether there is a next page
                        example: true
                      hasPrevPage:
                        type: boolean
                        description: Whether there is a previous page
                        example: false
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                      - hasNextPage
                      - hasPrevPage
                required:
                  - success
                  - data
                  - pagination
          headers:
            X-RateLimit-Limit:
              $ref: '#/components/headers/RateLimitLimit'
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
        '401':
          description: Unauthorized - Admin authentication failed
        '429':
          description: Too Many Requests
          headers:
            Retry-After:
              $ref: '#/components/headers/RetryAfter'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RateLimitError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/products/search:
    get:
      tags:
        - Products
      summary: Search products by name
      description: Search for products by name (partial matching). Supports pagination when page and/or limit parameters are provided.
      operationId: searchProducts
      parameters:
        - name: name
          in: query
          required: true
          description: Search term for product name
          schema:
            type: string
          example: paint
        - name: test
          in: query
          required: false
          description: 'If set to ''true'', only returns visible products. Defaults to ''false'' (returns all products).'
          schema:
            type: string
            enum:
              - 'true'
              - 'false'
          example: 'true'
        - name: page
          in: query
          required: false
          description: 'Page number for pagination (starts from 1). If provided, enables pagination mode.'
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of products per page (1-1000, default 10). If provided, enables pagination mode.'
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            example: 10
      responses:
        '200':
          description: Products found
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: Response when pagination is not used
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Product'
                      count:
                        type: integer
                        description: Number of products found
                        example: 3
                  - type: object
                    description: Response when pagination is used
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Product'
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            description: Current page number
                            example: 1
                          limit:
                            type: integer
                            description: Items per page
                            example: 10
                          total:
                            type: integer
                            description: Total number of products found
                            example: 25
                          totalPages:
                            type: integer
                            description: Total number of pages
                            example: 3
                          hasNextPage:
                            type: boolean
                            description: Whether there is a next page
                            example: true
                          hasPrevPage:
                            type: boolean
                            description: Whether there is a previous page
                            example: false
        '400':
          description: Missing search term or invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/products/filter:
    get:
      tags:
        - Products
      summary: Filter products
      description: Filter by categories and/or price range (filters products where at least one size price is within the range)
      operationId: filterProducts
      parameters:
        - name: categories
          in: query
          schema:
            type: array
            items:
              type: string
              format: uuid
          required: false
          style: form
          explode: true
          example:
            - 650e8400-e29b-41d4-a716-446655440001
          description: Array of category IDs to filter by
        - name: minPrice
          in: query
          schema:
            type: number
            format: float
          required: false
          example: 10
          description: Minimum price filter (matches products with at least one size price >= minPrice)
        - name: maxPrice
          in: query
          schema:
            type: number
            format: float
          required: false
          example: 100
          description: Maximum price filter (matches products with at least one size price <= maxPrice)
        - name: status
          in: query
          required: false
          description: 'If set to ''true'', only returns visible products. Defaults to ''false'' (returns all products).'
          schema:
            type: string
            enum:
              - 'true'
              - 'false'
          example: 'true'
        - name: page
          in: query
          required: false
          description: 'Page number for pagination (starts from 1). If provided, enables pagination mode.'
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of products per page (1-1000, default 10). If provided, enables pagination mode.'
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            example: 10
        - name: sortOrder
          in: query
          required: false
          description: 'Sort order for the results. ''asc'' for ascending price range (smallest to largest price difference), ''desc'' for descending price range (largest to smallest price difference), ''random'' for random order (default).'
          schema:
            type: string
            enum:
              - asc
              - desc
              - random
          example: random
      responses:
        '200':
          description: Filtered products retrieved successfully
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: Response when pagination is not used
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Product'
                      count:
                        type: integer
                        example: 7
                  - type: object
                    description: Response when pagination is used
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Product'
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            description: Current page number
                            example: 1
                          limit:
                            type: integer
                            description: Items per page
                            example: 10
                          total:
                            type: integer
                            description: Total number of filtered products
                            example: 25
                          totalPages:
                            type: integer
                            description: Total number of pages
                            example: 3
                          hasNextPage:
                            type: boolean
                            description: Whether there is a next page
                            example: true
                          hasPrevPage:
                            type: boolean
                            description: Whether there is a previous page
                            example: false
        '400':
          description: Invalid filter parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/products/active-offers:
    get:
      tags:
        - Products
      summary: Get products with active offers
      description: 'Retrieve all products that currently have active (VISIBLE) offers. Only products with offers that have status ''VISIBLE'' are returned, ordered by creation date (newest first).'
      operationId: getProductsWithActiveOffers
      responses:
        '200':
          description: Products with active offers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
                    description: Array of products with active offers
                  count:
                    type: integer
                    description: Total number of products with active offers
                    example: 3
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/products/most-ordered:
    get:
      tags:
        - Products
      summary: Get products with most orders (paginated)
      description: 'Retrieve products ordered by the total quantity of orders they have received, with pagination support. Only products that have been ordered at least once are included.'
      operationId: getProductsWithMostOrders
      parameters:
        - name: page
          in: query
          required: false
          description: Page number for pagination (starts from 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of products per page (1-1000, default 10)'
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            example: 10
      responses:
        '200':
          description: Products with most orders retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
                    description: Array of products ordered by total order quantity (descending)
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        description: Current page number
                        example: 1
                      limit:
                        type: integer
                        description: Items per page
                        example: 10
                      total:
                        type: integer
                        description: Total number of products with orders
                        example: 25
                      totalPages:
                        type: integer
                        description: Total number of pages
                        example: 3
                      hasNextPage:
                        type: boolean
                        description: Whether there is a next page
                        example: true
                      hasPrevPage:
                        type: boolean
                        description: Whether there is a previous page
                        example: false
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                      - hasNextPage
                      - hasPrevPage
                required:
                  - success
                  - data
                  - pagination
        '400':
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/categories:
    post:
      tags:
        - Categories
      summary: Create a new category
      description: 'Create a category with an image upload (single image). Image is stored in S3 under `categories/{categoryId}/...`.'
      operationId: createCategory
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
                - image
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  example: Interior Paint
                image:
                  type: string
                  format: binary
                  description: 'Category image (JPEG/PNG/WebP, max 5 MB)'
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    required:
                      - id
                      - name
                      - createdAt
                      - updatedAt
                    properties:
                      id:
                        type: string
                        format: uuid
                        example: 550e8400-e29b-41d4-a716-446655440000
                      name:
                        type: string
                        example: Interior Paint
                      images:
                        type: array
                        items:
                          type: string
                          format: uri
                        description: Category image URLs (normally a single element)
                        example:
                          - 'https://bucket.s3.us-east-1.amazonaws.com/categories/550e8400.../uuid.jpg'
                      createdAt:
                        type: string
                        format: date-time
                        example: '2025-11-25T09:00:00.000Z'
                      updatedAt:
                        type: string
                        format: date-time
                        example: '2025-11-25T09:15:00.000Z'
                  message:
                    type: string
                    example: Category created successfully
        '400':
          description: Validation error or malformed request
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1categories/get/responses/400/content/application~1json/schema'
    get:
      tags:
        - Categories
      summary: Get all categories with pagination
      description: Retrieve a list of all categories ordered by name. Supports pagination when page and/or limit parameters are provided.
      operationId: getAllCategories
      parameters:
        - name: page
          in: query
          required: false
          description: Page number for pagination (starts from 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: 'Number of categories per page (1-100, default 10)'
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        '200':
          description: Categories retrieved successfully
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/paths/~1api~1categories/post/responses/201/content/application~1json/schema/properties/data'
                      count:
                        type: integer
                        description: Total number of categories
                        example: 12
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          $ref: '#/paths/~1api~1categories/post/responses/201/content/application~1json/schema/properties/data'
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            description: Current page number
                            example: 1
                          limit:
                            type: integer
                            description: Items per page
                            example: 10
                          total:
                            type: integer
                            description: Total number of categories
                            example: 25
                          totalPages:
                            type: integer
                            description: Total number of pages
                            example: 3
                          hasNextPage:
                            type: boolean
                            description: Whether there is a next page
                            example: true
                          hasPrevPage:
                            type: boolean
                            description: Whether there is a previous page
                            example: false
        '400':
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: An error occurred
                  errors:
                    type: array
                    description: Detailed validation errors (if applicable)
                    items:
                      type: object
                      properties:
                        msg:
                          type: string
                          example: Name is required and must be a string
                        param:
                          type: string
                          example: name
                        location:
                          type: string
                          example: body
        '500':
          description: Unexpected server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1categories/get/responses/400/content/application~1json/schema'
  '/api/categories/{id}':
    get:
      tags:
        - Categories
      summary: Get category by ID
      operationId: getCategoryById
      parameters:
        - name: id
          in: path
          required: true
          description: Category UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Category retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/paths/~1api~1categories/post/responses/201/content/application~1json/schema/properties/data'
        '404':
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1categories/get/responses/400/content/application~1json/schema'
    put:
      tags:
        - Categories
      summary: Update category
      description: Update category name and/or replace its image. Set `keepExistingImage` to `true` to retain the current image.
      operationId: updateCategory
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Category UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  example: Exterior Paint
                image:
                  type: string
                  format: binary
                  description: New category image
                keepExistingImage:
                  type: string
                  enum:
                    - 'true'
                    - 'false'
                  description: Keep the current image (default false)
                  example: 'true'
      responses:
        '200':
          description: Category updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/paths/~1api~1categories/post/responses/201/content/application~1json/schema/properties/data'
                  message:
                    type: string
                    example: Category updated successfully
        '400':
          $ref: '#/paths/~1api~1categories/post/responses/400'
        '404':
          $ref: '#/paths/~1api~1categories~1%7Bid%7D/get/responses/404'
    delete:
      tags:
        - Categories
      summary: Delete category
      operationId: deleteCategory
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Category UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Category deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Category deleted successfully
        '400':
          $ref: '#/paths/~1api~1categories/post/responses/400'
        '404':
          $ref: '#/paths/~1api~1categories~1%7Bid%7D/get/responses/404'
  /api/orders/calculate:
    post:
      tags:
        - Orders
      summary: Calculate cart (Preview)
      description: |
        Calculate the total amount of a cart and apply any active offers.
        This endpoint is used for previewing the cart total before creating an order.
      operationId: calculateCart
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - items
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/CartCalculationItem'
      responses:
        '200':
          description: Cart calculated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/CalculationResult'
                  message:
                    type: string
                    example: Cart calculated successfully
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
  /api/orders:
    post:
      tags:
        - Orders
      summary: Create a new order
      description: |
        Create a new order with items. The order will be created with status 'pending' and
        a notification will be sent to admin via Socket.IO.

        **Form Data Format:**
        - For single item: `productId=uuid&quantity=2`
        - For multiple items, use indexed notation: `productId[0]=uuid1&quantity[0]=2&productId[1]=uuid2&quantity[1]=1`
        - Each productId must have a corresponding quantity with the same index

        **Notifications:**
        - When an order is created, admins connected to the 'admin' room will receive a 'new_order' event via Socket.IO.
        - Users should connect to Socket.IO and join the 'user_{phoneNumber}' room to receive real-time order status updates.
        - Push notifications are also sent via Firebase Cloud Messaging (FCM) when order status changes.
        - To receive push notifications, users must register their FCM token using the `/api/notifications/register-token` endpoint.
      operationId: createOrder
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '201':
          description: Order created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Order'
                  message:
                    type: string
                    example: Order created successfully
        '400':
          description: Validation error or invalid data
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
    get:
      tags:
        - Orders
      summary: Get orders by phone number
      description: Retrieve all orders for a specific phone number
      operationId: getOrdersByPhoneNumber
      parameters:
        - name: phoneNumber
          in: query
          required: true
          description: User's phone number
          schema:
            type: string
            minLength: 7
            maxLength: 15
          example: '+1234567890'
      responses:
        '200':
          description: Orders retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    description: Error message
                    example: An error occurred
                  errors:
                    type: array
                    description: Validation errors (if applicable)
                    items:
                      type: object
                      properties:
                        msg:
                          type: string
                        param:
                          type: string
                        location:
                          type: string
  '/api/orders/{orderId}':
    get:
      tags:
        - Orders
      summary: Get order by ID
      description: Retrieve a specific order by its ID
      operationId: getOrder
      parameters:
        - name: orderId
          in: path
          required: true
          description: Order UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Order retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Order'
        '404':
          description: Order not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
    delete:
      tags:
        - Orders
      summary: Delete order (Admin only)
      description: |
        Delete a pending order. Only pending orders can be deleted for safety reasons.
        Accepted, rejected, or in-progress orders should be cancelled by changing their status instead.
      operationId: deleteOrder
      parameters:
        - name: orderId
          in: path
          required: true
          description: Order UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Order deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Order deleted successfully
        '400':
          description: Validation error or order cannot be deleted
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
        '404':
          description: Order not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
  '/api/orders/{orderId}/status':
    patch:
      tags:
        - Orders
      summary: Update order status
      description: |
        Update the status of an order. When status changes, notifications will be sent
        to the order owner via Socket.IO and Firebase Cloud Messaging (FCM). Valid statuses: pending, accepted, rejected, in_progress

        **Notifications:**
        - Socket.IO: When order status is updated, the order owner (connected to 'user_{phoneNumber}' room)
          will receive an 'order_status_changed' event with the new status.
        - Push Notifications: Firebase Cloud Messaging (FCM) push notifications are also sent to all registered
          FCM tokens for the order owner's phone number. Users must register their FCM token using
          `/api/notifications/register-token` endpoint to receive push notifications.
      operationId: updateOrderStatus
      parameters:
        - name: orderId
          in: path
          required: true
          description: Order UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  format: text
                  enum:
                    - pending
                    - ordered
                    - accepted
                    - rejected
                    - in_progress
                  description: New order status
                  example: accepted
      responses:
        '200':
          description: Order status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Order'
                  message:
                    type: string
                    example: Order status updated successfully
        '400':
          description: Validation error or invalid status
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
        '404':
          description: Order not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
  /api/admin/orders:
    get:
      tags:
        - Orders
      summary: Get all orders (Admin)
      description: |
        Retrieve all orders with pagination. This endpoint is for admin use to view all orders.
      operationId: getOrdersForAdmin
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: page
          in: query
          required: false
          description: Page number for pagination (starts from 1)
          schema:
            type: integer
            minimum: 1
            default: 1
          example: 1
        - name: limit
          in: query
          required: false
          description: Maximum number of orders to return per page
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
          example: 10
      responses:
        '200':
          description: Orders retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 150
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      totalPages:
                        type: integer
                        example: 15
                      hasNextPage:
                        type: boolean
                        example: true
                      hasPrevPage:
                        type: boolean
                        example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1orders/get/responses/500/content/application~1json/schema'
  /api/offers:
    post:
      tags:
        - Offers
      summary: Create a new offer
      description: Create a new promotional offer (Percentage Discount or Buy 2 Get 1 Free)
      operationId: createOffer
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateOfferRequest'
      responses:
        '201':
          description: Offer created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Offer'
                  message:
                    type: string
                    example: Offer created successfully
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                  errors:
                    type: array
                    items:
                      type: object
    get:
      tags:
        - Offers
      summary: Get all offers
      description: Retrieve a list of all offers
      operationId: getAllOffers
      responses:
        '200':
          description: Offers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Offer'
                  count:
                    type: integer
                    example: 5
  /api/offers/details:
    get:
      tags:
        - Offers
      summary: Get all offers with full details and pagination
      description: Retrieve all offers with complete product and category details using pagination
      operationId: getAllOffersWithDetailsPaginated
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          required: false
          description: 'Number of items per page (default 10, max 100)'
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        '200':
          description: Offers with details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OfferWithDetails'
                  total:
                    type: integer
                    description: Total number of offers
                    example: 25
                  page:
                    type: integer
                    description: Current page number
                    example: 1
                  limit:
                    type: integer
                    description: Items per page
                    example: 10
                  totalPages:
                    type: integer
                    description: Total number of pages
                    example: 3
                  hasNextPage:
                    type: boolean
                    description: Whether there is a next page
                    example: true
                  hasPrevPage:
                    type: boolean
                    description: Whether there is a previous page
                    example: false
        '400':
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1offers/post/responses/400/content/application~1json/schema'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1offers/post/responses/400/content/application~1json/schema'
  /api/offers/visible:
    get:
      tags:
        - Offers
      summary: Get visible offers with full details and pagination
      description: 'Retrieve only promotional offers with status ''VISIBLE'', including complete product and category details'
      operationId: getVisibleOffersWithDetailsPaginated
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          required: false
          description: 'Number of items per page (default 10, max 100)'
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        '200':
          description: Visible offers with details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OfferWithDetails'
                  total:
                    type: integer
                    description: Total number of visible offers
                    example: 15
                  page:
                    type: integer
                    description: Current page number
                    example: 1
                  limit:
                    type: integer
                    description: Items per page
                    example: 10
                  totalPages:
                    type: integer
                    description: Total number of pages
                    example: 2
                  hasNextPage:
                    type: boolean
                    description: Whether there is a next page
                    example: true
                  hasPrevPage:
                    type: boolean
                    description: Whether there is a previous page
                    example: false
        '400':
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1offers/post/responses/400/content/application~1json/schema'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1offers/post/responses/400/content/application~1json/schema'
  '/api/offers/{id}':
    get:
      tags:
        - Offers
      summary: Get offer by ID
      description: Retrieve a specific offer by its ID
      operationId: getOfferById
      parameters:
        - name: id
          in: path
          required: true
          description: Offer UUID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Offer retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Offer'
        '404':
          description: Offer not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1offers/post/responses/400/content/application~1json/schema'
    put:
      tags:
        - Offers
      summary: Update offer
      description: Update an existing offer
      operationId: updateOffer
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Offer UUID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UpdateOfferRequest'
      responses:
        '200':
          description: Offer updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Offer'
                  message:
                    type: string
                    example: Offer updated successfully
        '404':
          description: Offer not found
    delete:
      tags:
        - Offers
      summary: Delete offer
      description: Delete an offer by its ID
      operationId: deleteOffer
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Offer UUID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Offer deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Offer deleted successfully
        '404':
          description: Offer not found
  /api/ads-cards:
    post:
      tags:
        - Ads Cards
      summary: Create a new ads card
      description: 'Create a new advertisement card with title, text, and image upload.'
      operationId: createAdsCard
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - text
                - image
              properties:
                title:
                  type: string
                  minLength: 2
                  maxLength: 255
                  example: Special Paint Offer
                text:
                  type: string
                  minLength: 10
                  maxLength: 1000
                  example: Get 20% off on all interior paints this weekend! High-quality latex paint perfect for your home.
                image:
                  type: string
                  format: binary
                  description: 'Ads card image (JPEG, PNG, or WebP, max 5MB)'
                status:
                  $ref: '#/components/schemas/AdsCardStatus'
      responses:
        '201':
          description: Ads card created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/AdsCard'
                  message:
                    type: string
                    example: Ads card created successfully
        '400':
          description: Validation error or creation failed
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1ads-cards/get/responses/500/content/application~1json/schema'
    get:
      tags:
        - Ads Cards
      summary: Get all ads cards
      description: Retrieve a list of all ads cards ordered by creation date (newest first)
      operationId: getAllAdsCards
      responses:
        '200':
          description: Ads cards retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdsCard'
                  count:
                    type: integer
                    description: Total number of ads cards
                    example: 5
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    description: Error message
                    example: An error occurred
                  errors:
                    type: array
                    description: Detailed validation errors (if applicable)
                    items:
                      type: object
                      properties:
                        msg:
                          type: string
                          description: Error message
                          example: Title is required and must be a string
                        param:
                          type: string
                          description: Parameter that caused the error
                          example: title
                        location:
                          type: string
                          description: Location of the parameter
                          example: body
  /api/ads-cards/active:
    get:
      tags:
        - Ads Cards
      summary: Get active ads cards
      description: Retrieve a list of all active ads cards ordered by creation date (newest first)
      operationId: getActiveAdsCards
      responses:
        '200':
          description: Active ads cards retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdsCard'
                  count:
                    type: integer
                    description: Number of active ads cards
                    example: 3
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1ads-cards/get/responses/500/content/application~1json/schema'
  '/api/ads-cards/{id}':
    get:
      tags:
        - Ads Cards
      summary: Get ads card by ID
      description: Retrieve a single ads card by unique identifier
      operationId: getAdsCardById
      parameters:
        - name: id
          in: path
          required: true
          description: Ads card UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Ads card retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/AdsCard'
        '400':
          description: Invalid ads card ID format
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1ads-cards/get/responses/500/content/application~1json/schema'
        '404':
          description: Ads card not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Ads card not found
    put:
      tags:
        - Ads Cards
      summary: Update ads card
      description: Update an existing ads card. All fields optional.
      operationId: updateAdsCard
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Ads card UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 2
                  maxLength: 255
                  example: Updated Special Paint Offer
                text:
                  type: string
                  minLength: 10
                  maxLength: 1000
                  example: 'Updated offer: Get 25% off on all interior paints this weekend!'
                image:
                  type: string
                  format: binary
                  description: 'New ads card image (JPEG, PNG, or WebP, max 5MB)'
                status:
                  $ref: '#/components/schemas/AdsCardStatus'
                keepExistingImage:
                  type: string
                  enum:
                    - 'true'
                    - 'false'
                  description: Keep the current image (default false)
                  example: 'true'
      responses:
        '200':
          description: Ads card updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/AdsCard'
                  message:
                    type: string
                    example: Ads card updated successfully
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1ads-cards/get/responses/500/content/application~1json/schema'
        '404':
          description: Ads card not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Ads card not found
    delete:
      tags:
        - Ads Cards
      summary: Delete ads card
      description: Delete an ads card by its ID
      operationId: deleteAdsCard
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Ads card UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Ads card deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Ads card deleted successfully
        '400':
          description: Invalid ads card ID or deletion failed
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1ads-cards/get/responses/500/content/application~1json/schema'
        '404':
          description: Ads card not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Ads card not found
  /api/video-cards:
    post:
      tags:
        - Video Cards
      summary: Create a new video card
      description: 'Create a new video card with title, video upload, and visibility status.'
      operationId: createVideoCard
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - video
              properties:
                title:
                  type: string
                  minLength: 2
                  maxLength: 255
                  example: Product Demo Video
                video:
                  type: string
                  format: binary
                  description: 'Video file (MP4, MPEG, MOV, AVI, WEBM, max 100MB)'
                status:
                  $ref: '#/components/schemas/VideoStatus'
      responses:
        '201':
          description: Video card created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/VideoCard'
                  message:
                    type: string
                    example:     
        '400':
          description: Validation error or creation failed
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1video-cards/get/responses/500/content/application~1json/schema'
    get:
      tags:
        - Video Cards
      summary: Get all video cards
      description: Retrieve a list of all video cards ordered by creation date (newest first)
      operationId: getAllVideoCards
      responses:
        '200':
          description: Video cards retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/VideoCard'
                  count:
                    type: integer
                    description: Total number of video cards
                    example: 5
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    description: Error message
                    example: An error occurred
                  errors:
                    type: array
                    description: Detailed validation errors (if applicable)
                    items:
                      type: object
                      properties:
                        msg:
                          type: string
                          description: Error message
                          example:   
                        param:
                          type: string
                          description: Parameter that caused the error
                          example: title
                        location:
                          type: string
                          description: Location of the parameter
                          example: body
  /api/video-cards/visible:
    get:
      tags:
        - Video Cards
      summary: Get visible video cards
      description: Retrieve a list of all visible video cards ordered by creation date (newest first)
      operationId: getVisibleVideoCards
      responses:
        '200':
          description: Visible video cards retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/VideoCard'
                  count:
                    type: integer
                    description: Number of visible video cards
                    example: 3
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1video-cards/get/responses/500/content/application~1json/schema'
  '/api/video-cards/{id}':
    get:
      tags:
        - Video Cards
      summary: Get video card by ID
      description: Retrieve a single video card by unique identifier
      operationId: getVideoCardById
      parameters:
        - name: id
          in: path
          required: true
          description: Video card UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Video card retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/VideoCard'
        '400':
          description: Invalid video card ID format
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1video-cards/get/responses/500/content/application~1json/schema'
        '404':
          description: Video card not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example:    
    put:
      tags:
        - Video Cards
      summary: Update video card
      description: Update an existing video card. All fields optional.
      operationId: updateVideoCard
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Video card UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        required: false
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 2
                  maxLength: 255
                  example: Updated Product Demo Video
                video:
                  type: string
                  format: binary
                  description: 'New video file (MP4, MPEG, MOV, AVI, WEBM, max 100MB)'
                status:
                  $ref: '#/components/schemas/VideoStatus'
      responses:
        '200':
          description: Video card updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/VideoCard'
                  message:
                    type: string
                    example:     
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1video-cards/get/responses/500/content/application~1json/schema'
        '404':
          description: Video card not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example:    
    delete:
      tags:
        - Video Cards
      summary: Delete video card
      description: Delete a video card and its associated video from AWS S3
      operationId: deleteVideoCard
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          description: Video card UUID
          schema:
            type: string
            format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Video card deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example:     
        '400':
          description: Invalid video card ID or deletion failed
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1video-cards/get/responses/500/content/application~1json/schema'
        '404':
          description: Video card not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example:    
  /api/payment-methods:
    post:
      tags:
        - Payment Methods
      summary: Create a new payment method
      description: 'Create a new payment method with name, description, and QR code image upload.'
      operationId: createPaymentMethod
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - qrCode
              properties:
                qrCode:
                  type: string
                  format: binary
                  description: 'QR code image (JPEG, PNG, or WebP, max 5MB)'
                status:
                  $ref: '#/components/schemas/PaymentMethodStatus'
      responses:
        '201':
          description: Payment method created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/PaymentMethod'
                  message:
                    type: string
                    example: Payment method created successfully
        '400':
          description: Validation error or creation failed
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
    get:
      tags:
        - Payment Methods
      summary: Get all payment methods
      description: Retrieve a list of all payment methods ordered by creation date (newest first)
      operationId: getAllPaymentMethods
      responses:
        '200':
          description: Payment methods retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/PaymentMethod'
                  count:
                    type: integer
                    description: Total number of payment methods
                    example: 3
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Validation error
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          example: name
                        message:
                          type: string
                          example: Name is required
  /api/payment-methods/visible:
    get:
      tags:
        - Payment Methods
      summary: Get visible payment methods
      description: Retrieve a list of all visible payment methods for public display
      operationId: getVisiblePaymentMethods
      responses:
        '200':
          description: Visible payment methods retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/PaymentMethod'
                  count:
                    type: integer
                    description: Total number of visible payment methods
                    example: 2
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
  '/api/payment-methods/{id}':
    get:
      tags:
        - Payment Methods
      summary: Get payment method by ID
      description: Retrieve a specific payment method by its UUID
      operationId: getPaymentMethodById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Payment method UUID
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Payment method retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/PaymentMethod'
        '400':
          description: Invalid ID format
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
        '404':
          description: Payment method not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
    put:
      tags:
        - Payment Methods
      summary: Update payment method
      description: Update an existing payment method with optional QR code replacement
      operationId: updatePaymentMethod
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Payment method UUID
          example: 550e8400-e29b-41d4-a716-446655440000
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                qrCode:
                  type: string
                  format: binary
                  description: 'New QR code image (optional, JPEG, PNG, or WebP, max 5MB)'
                status:
                  $ref: '#/components/schemas/PaymentMethodStatus'
      responses:
        '200':
          description: Payment method updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/PaymentMethod'
                  message:
                    type: string
                    example: Payment method updated successfully
        '400':
          description: Validation error or invalid ID
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
        '404':
          description: Payment method not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
    delete:
      tags:
        - Payment Methods
      summary: Delete payment method
      description: Delete a payment method and its associated QR code image
      operationId: deletePaymentMethod
      security:
        - AdminEmail: []
          AdminPassword: []
          HmacSignature: []
          HmacTimestamp: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Payment method UUID
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Payment method deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Payment method deleted successfully
        '400':
          description: Invalid ID format
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
        '404':
          description: Payment method not found
          content:
            application/json:
              schema:
                $ref: '#/paths/~1api~1payment-methods/get/responses/500/content/application~1json/schema'
  /api/notifications/register-token:
    post:
      tags:
        - Notifications
      summary: Register Firebase Cloud Messaging (FCM) token
      description: |
        Register or update a Firebase Cloud Messaging token for push notifications.

        This endpoint allows both customers and admins to register their FCM tokens.
        When an order is created (for admins) or order status changes (for customers),
        push notifications will be sent to all registered tokens.

        **For Customers:**
        - Register with `phone_number` to receive order status updates
        - Notifications sent when order status changes (pending  accepted  ordered, etc.)

        **For Admins:**
        - Register with `admin_email` to receive new order notifications
        - Notifications sent when new orders are created

        **Important Notes:**
        - Tokens are automatically updated if the same user and token combination already exists
        - Multiple tokens can be registered per user (for multiple devices)
        - Invalid tokens are automatically removed from the database
        - Push notifications work alongside Socket.IO notifications
        - Either `phone_number` OR `admin_email` must be provided, but not both
      operationId: registerFcmToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterFcmTokenRequest'
            examples:
              customer_registration:
                summary: Customer FCM token registration
                description: Register FCM token for a customer to receive order status updates
                value:
                  phone_number: '+1234567890'
                  token: dGhpcyBpcyBhIGZha2UgZmlyZWJhc2UgdG9rZW4gZm9yIGRlbW9uc3RyYXRpb24=
                  device_type: android
              admin_registration:
                summary: Admin FCM token registration
                description: Register FCM token for an admin to receive new order notifications
                value:
                  admin_email: admin@company.com
                  token: dGhpcyBpcyBhIGZha2UgZmlyZWJhc2UgdG9rZW4gZm9yIGRlbW9uc3RyYXRpb24=
                  device_type: web
      responses:
        '200':
          description: FCM token registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/FcmToken'
                  message:
                    type: string
                    examples:
                      customer: Customer FCM token registered successfully for +1234567890
                      admin: Admin FCM token registered successfully for admin@company.com
        '400':
          description: Validation error or invalid data
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    examples:
                      missing_user: Either phone_number (for customers) or admin_email (for admins) must be provided
                      both_provided: Cannot provide both phone_number and admin_email. Choose one based on user type
                      invalid_phone: Invalid phone number format - must be 7-20 characters
                      invalid_email: Invalid admin email format
                      invalid_token: FCM token is required
                      invalid_device: 'Invalid device type. Must be one of: android, ios, web, other'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    description: Error message describing what went wrong
                    example: Either phone_number (for customers) or admin_email (for admins) must be provided
                  errors:
                    type: array
                    description: Detailed validation errors (when applicable)
                    items:
                      type: object
                      properties:
                        msg:
                          type: string
                          description: Validation error message
                          example: Phone number must be between 7 and 20 characters
                        param:
                          type: string
                          description: Parameter name that failed validation
                          example: phone_number
                        location:
                          type: string
                          description: 'Location of the parameter (body, query, etc.)'
                          example: body
components:
  schemas:
    Product:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique product identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Product name
          example: Premium Interior Paint
        description:
          type: string
          description: Product description
          example: High-quality latex paint perfect for interior walls and ceilings
        category_id:
          type: string
          format: uuid
          description: Product category ID
          example: 650e8400-e29b-41d4-a716-446655440001
        colors:
          type: array
          items:
            type: string
          description: Available color options (optional)
          example:
            - Red
            - Blue
            - Green
        sizes:
          type: array
          items:
            type: object
            properties:
              size:
                type: string
                example: 1L
              price:
                type: number
                format: float
                example: 29.99
          description: Array of size objects
          example:
            - size: 1L
              price: 29.99
            - size: 5L
              price: 129.99
            - size: 10L
              price: 239.99
        status:
          type: string
          enum:
            - visible
            - hidden
          description: Product visibility status
          example: visible
        images:
          type: array
          items:
            type: string
            format: uri
          description: Array of image URLs stored in AWS S3
          example:
            - 'https://bucket.s3.us-east-1.amazonaws.com/products/550e8400.../uuid1.jpg'
            - 'https://bucket.s3.us-east-1.amazonaws.com/products/550e8400.../uuid2.jpg'
        createdAt:
          type: string
          format: date-time
          description: Product creation timestamp
          example: '2025-11-25T10:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Product last update timestamp
          example: '2025-11-25T10:30:00.000Z'
      required:
        - id
        - name
        - description
        - category_id
        - sizes
        - status
        - createdAt
        - updatedAt
    Order:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique order identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        phone_number:
          type: string
          description: Customer's phone number
          example: '+1234567890'
        customer_name:
          type: string
          description: Customer or company name
          example: John Doe
        area_name:
          type: string
          description: Delivery area name
          example: Downtown
        street_name:
          type: string
          description: Street name for delivery
          example: Main Street
        building_number:
          type: string
          description: Building or shop number
          example: 'Building 5, Shop 12'
        additional_notes:
          type: string
          description: Additional delivery notes
          example: Please call before delivery
        delivery_agent_name:
          type: string
          description: Name of the delivery agent assigned to the order
          example: John Smith
        payment_method:
          $ref: '#/components/schemas/PaymentMethodType'
        status:
          $ref: '#/components/schemas/OrderStatus'
        total_amount:
          type: number
          format: float
          description: Total amount of the order
          example: 91.98
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
          description: List of items in the order
        createdAt:
          type: string
          format: date-time
          description: Order creation timestamp
          example: '2025-11-29T10:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Order last update timestamp
          example: '2025-11-29T10:30:00.000Z'
      required:
        - id
        - phone_number
        - customer_name
        - area_name
        - delivery_agent_name
        - payment_method
        - status
        - total_amount
        - items
        - createdAt
        - updatedAt
    OrderItem:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique order item identifier
          example: item-550e8400-e29b-41d4-a716-446655440000
        order_id:
          type: string
          format: uuid
          description: Order identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        product_id:
          type: string
          format: uuid
          description: Product identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        offer_id:
          type: string
          format: uuid
          description: Offer identifier (optional)
          example: 550e8400-e29b-41d4-a716-446655440001
        offerType:
          type: string
          nullable: true
          description: Type of the offer applied (automatically determined)
          example: PERCENTAGE_DISCOUNT
        quantity:
          type: integer
          minimum: 1
          description: Quantity of the product
          example: 2
        price:
          type: number
          format: float
          description: Price snapshot at time of order creation
          example: 45.99
        color:
          type: string
          description: Selected color of the product
          example: Red
        size:
          type: string
          description: Selected size of the product
          example: 1L
        createdAt:
          type: string
          format: date-time
          description: Order item creation timestamp
          example: '2025-11-29T10:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Order item last update timestamp
          example: '2025-11-29T10:00:00.000Z'
      required:
        - id
        - order_id
        - product_id
        - quantity
        - price
        - createdAt
        - updatedAt
    OrderStatus:
      type: string
      enum:
        - pending
        - ordered
        - accepted
        - rejected
        - in_progress
      description: Order status
      example: pending
      x-enum-descriptions:
        pending: Order is pending approval
        ordered: Order has been placed
        accepted: Order has been accepted
        rejected: Order has been rejected
        in_progress: Order is being processed
    PaymentMethodType:
      type: string
      enum:
        - cash_on_delivery
        - electronic_payment
      description: Payment method
      example: cash_on_delivery
      x-enum-descriptions:
        cash_on_delivery: Payment on delivery
        electronic_payment: Electronic payment
    CreateOrderRequest:
      type: object
      required:
        - phoneNumber
        - customerName
        - areaName
        - deliveryAgentName
        - paymentMethod
      properties:
        phoneNumber:
          type: string
          format: text
          minLength: 7
          maxLength: 15
          description: Customer's phone number
          example: '+1234567890'
        customerName:
          type: string
          format: text
          minLength: 1
          description: Customer or company name
          example: John Doe
        areaName:
          type: string
          format: text
          minLength: 1
          description: Delivery area name
          example: Downtown
        streetName:
          type: string
          format: text
          description: Street name for delivery (optional)
          example: Main Street
        buildingNumber:
          type: string
          format: text
          description: Building or shop number (optional)
          example: 'Building 5, Shop 12'
        additionalNotes:
          type: string
          format: text
          description: Additional delivery notes (optional)
          example: Please call before delivery
        deliveryAgentName:
          type: string
          enum:
            -  
            -  
            -  
            -  
            -  
          description: Name of the delivery agent assigned to the order
          example:  
        paymentMethod:
          type: string
          format: text
          enum:
            - cash_on_delivery
            - electronic_payment
          description: Payment method
          example: cash_on_delivery
        productId:
          type: array
          items:
            type: string
            format: uuid
          description: |
            List of Product UUIDs.
            Example: ["550e8400-e29b-41d4-a716-446655440000", "550e8400-e29b-41d4-a716-446655440001"]
        offerId:
          type: array
          items:
            type: string
            format: uuid
          description: |
            List of Offer UUIDs (optional).
            Example: ["550e8400-e29b-41d4-a716-446655440002", null]
        quantity:
          type: array
          items:
            type: integer
            format: int32
            minimum: 1
          description: |
            List of quantities corresponding to the productIds.
            Example: [2, 1]
        color:
          type: array
          items:
            type: string
          description: |
            List of colors corresponding to the productIds.
            Example: ["Red", "Blue"]
        size:
          type: array
          items:
            type: string
          description: |
            List of sizes corresponding to the productIds.
            Example: ["1L", "5L"]
        price:
          type: array
          items:
            type: number
            format: float
          description: |
            List of prices corresponding to the productIds.
            Used for validation against database prices.
            Example: [45.99, 149.99]
    CartCalculationItem:
      type: object
      required:
        - productId
        - quantity
      properties:
        productId:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
        offerId:
          type: string
          format: uuid
          nullable: true
          example: 550e8400-e29b-41d4-a716-446655440001
        quantity:
          type: integer
          minimum: 1
          example: 5
        color:
          type: string
          example: Red
        size:
          type: string
          example: 1L
    CalculationResult:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/CalculatedItem'
        totalAmount:
          type: number
          example: 450
    CalculatedItem:
      type: object
      properties:
        productId:
          type: string
          format: uuid
        productName:
          type: string
        quantity:
          type: integer
        basePrice:
          type: number
        finalPrice:
          type: number
        lineTotal:
          type: number
        appliedOfferId:
          type: string
          format: uuid
          nullable: true
        appliedOfferName:
          type: string
          nullable: true
        color:
          type: string
        size:
          type: string
        error:
          type: string
          nullable: true
    Offer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        type:
          $ref: '#/components/schemas/OfferType'
        product_id:
          type: string
          format: uuid
        discount_percentage:
          type: number
          nullable: true
          minimum: 0
          maximum: 100
        buy_quantity:
          type: integer
          nullable: true
          minimum: 1
        get_quantity:
          type: integer
          nullable: true
          minimum: 1
        status:
          $ref: '#/components/schemas/OfferStatus'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    OfferType:
      type: string
      enum:
        - PERCENTAGE_DISCOUNT
        - BUY_X_GET_Y_FREE
      description: Type of the offer
    OfferStatus:
      type: string
      enum:
        - VISIBLE
        - HIDDEN
      description: 'Offer visibility status (VISIBLE = shown & applied, HIDDEN = not shown / not applied)'
    OfferWithDetails:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        type:
          $ref: '#/components/schemas/OfferType'
        product_id:
          type: string
          format: uuid
        discount_percentage:
          type: number
          nullable: true
          minimum: 0
          maximum: 100
        buy_quantity:
          type: integer
          nullable: true
          minimum: 1
        get_quantity:
          type: integer
          nullable: true
          minimum: 1
        status:
          $ref: '#/components/schemas/OfferStatus'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        product:
          type: object
          properties:
            id:
              type: string
              format: uuid
            name:
              type: string
            description:
              type: string
            category_id:
              type: string
              format: uuid
            colors:
              type: array
              items:
                type: string
            sizes:
              type: array
              items:
                type: string
            status:
              type: string
              enum:
                - VISIBLE
                - HIDDEN
            images:
              type: array
              items:
                type: string
              nullable: true
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
        category:
          $ref: '#/components/schemas/Category'
    OfferCalculationResult:
      type: object
      properties:
        original_price:
          type: number
        discount_amount:
          type: number
        final_price:
          type: number
        offer_applied:
          type: boolean
        offer_details:
          type: object
          properties:
            offer_id:
              type: string
              format: uuid
            offer_name:
              type: string
            offer_type:
              $ref: '#/components/schemas/OfferType'
    CreateOfferRequest:
      type: object
      required:
        - name
        - description
        - type
        - product_id
        - status
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 255
        description:
          type: string
        type:
          $ref: '#/components/schemas/OfferType'
        product_id:
          type: string
          format: uuid
        discount_percentage:
          type: number
          minimum: 0.01
          maximum: 100
          description: Required if type is PERCENTAGE_DISCOUNT
        buy_quantity:
          type: integer
          minimum: 1
          description: Required if type is BUY_X_GET_Y_FREE
        get_quantity:
          type: integer
          minimum: 1
          description: Required if type is BUY_X_GET_Y_FREE
        status:
          $ref: '#/components/schemas/OfferStatus'
    UpdateOfferRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 255
        description:
          type: string
        type:
          $ref: '#/components/schemas/OfferType'
        product_id:
          type: string
          format: uuid
        discount_percentage:
          type: number
          minimum: 0.01
          maximum: 100
        buy_quantity:
          type: integer
          minimum: 1
        get_quantity:
          type: integer
          minimum: 1
        status:
          $ref: '#/components/schemas/OfferStatus'
    Category:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        images:
          type: array
          items:
            type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    AdsCard:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique ads card identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        title:
          type: string
          description: Ads card title
          example: Special Paint Offer
        text:
          type: string
          description: Ads card description text
          example: Get 20% off on all interior paints this weekend! High-quality latex paint perfect for your home.
        imageUrl:
          type: string
          format: uri
          description: URL of the ads card image
          example: 'https://example.com/ads/special-offer.jpg'
        status:
          $ref: '#/components/schemas/AdsCardStatus'
        createdAt:
          type: string
          format: date-time
          description: Ads card creation timestamp
          example: '2025-11-25T10:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Ads card last update timestamp
          example: '2025-11-25T10:30:00.000Z'
      required:
        - id
        - title
        - text
        - imageUrl
        - status
        - createdAt
        - updatedAt
    AdsCardStatus:
      type: string
      enum:
        - ACTIVE
        - INACTIVE
      description: Ads card status
      example: ACTIVE
    CreateAdsCardRequest:
      type: object
      required:
        - title
        - text
        - imageUrl
      properties:
        title:
          type: string
          minLength: 2
          maxLength: 255
          example: Special Paint Offer
        text:
          type: string
          minLength: 10
          maxLength: 1000
          example: Get 20% off on all interior paints this weekend! High-quality latex paint perfect for your home.
        imageUrl:
          type: string
          format: uri
          example: 'https://example.com/ads/special-offer.jpg'
        status:
          $ref: '#/components/schemas/AdsCardStatus'
    UpdateAdsCardRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 2
          maxLength: 255
          example: Updated Special Paint Offer
        text:
          type: string
          minLength: 10
          maxLength: 1000
          example: 'Updated offer: Get 25% off on all interior paints this weekend!'
        imageUrl:
          type: string
          format: uri
          example: 'https://example.com/ads/updated-special-offer.jpg'
        status:
          $ref: '#/components/schemas/AdsCardStatus'
    VideoCard:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique video card identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        title:
          type: string
          description: Video card title
          example: Product Demo Video
        videoUrl:
          type: string
          format: uri
          description: URL of the video file stored in S3
          example: 'https://talas-paints-dev.s3.eu-north-1.amazonaws.com/video-cards/550e8400.../uuid.mp4'
        status:
          $ref: '#/components/schemas/VideoStatus'
        createdAt:
          type: string
          format: date-time
          description: Video card creation timestamp
          example: '2025-12-06T14:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Video card last update timestamp
          example: '2025-12-06T14:30:00.000Z'
      required:
        - id
        - title
        - videoUrl
        - status
        - createdAt
        - updatedAt
    VideoStatus:
      type: string
      enum:
        - visible
        - hidden
      description: Video card visibility status
      example: visible
    CreateVideoCardRequest:
      type: object
      required:
        - title
        - videoUrl
      properties:
        title:
          type: string
          minLength: 2
          maxLength: 255
          example: Product Demo Video
        videoUrl:
          type: string
          format: uri
          example: 'https://talas-paints-dev.s3.eu-north-1.amazonaws.com/video-cards/uuid.mp4'
        status:
          $ref: '#/components/schemas/VideoStatus'
    UpdateVideoCardRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 2
          maxLength: 255
          example: Updated Product Demo Video
        videoUrl:
          type: string
          format: uri
          example: 'https://talas-paints-dev.s3.eu-north-1.amazonaws.com/video-cards/uuid-updated.mp4'
        status:
          $ref: '#/components/schemas/VideoStatus'
    PaymentMethod:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique payment method identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        qrCodeUrl:
          type: string
          format: uri
          description: URL of the QR code image
          example: 'https://example.com/payment-methods/qr-bank-transfer.jpg'
        status:
          $ref: '#/components/schemas/PaymentMethodStatus'
        createdAt:
          type: string
          format: date-time
          description: Payment method creation timestamp
          example: '2025-11-25T10:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Payment method last update timestamp
          example: '2025-11-25T10:30:00.000Z'
      required:
        - id
        - qrCodeUrl
        - status
        - createdAt
        - updatedAt
    PaymentMethodStatus:
      type: string
      enum:
        - visible
        - hidden
      description: Payment method visibility status
      example: visible
    FcmToken:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for the FCM token record
          example: 123e4567-e89b-12d3-a456-426614174000
        phone_number:
          type: string
          description: User's phone number
          example: '+1234567890'
        token:
          type: string
          description: Firebase Cloud Messaging registration token
          example: dGhpcyBpcyBhIGZha2UgdG9rZW4=
        device_type:
          type: string
          nullable: true
          description: Device type identifier
          example: android
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the token was first registered
          example: '2025-01-15T10:30:00Z'
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the token was last updated
          example: '2025-01-15T10:30:00Z'
    RegisterFcmTokenRequest:
      type: object
      required:
        - phone_number
        - token
      properties:
        phone_number:
          type: string
          minLength: 7
          maxLength: 20
          description: User's phone number
          example: '+1234567890'
        token:
          type: string
          description: Firebase Cloud Messaging registration token
          example: dGhpcyBpcyBhIGZha2UgZmlyZWJhc2UgdG9rZW4gZm9yIGRlbW9uc3RyYXRpb24=
        device_type:
          type: string
          enum:
            - android
            - ios
            - web
            - other
          description: Optional device type identifier
          example: android
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          description: Error message
          example: An error occurred
        errors:
          type: array
          description: Detailed validation errors (if applicable)
          items:
            type: object
            properties:
              msg:
                type: string
                description: Error message
                example: Name is required and must be a string
              param:
                type: string
                description: Parameter that caused the error
                example: name
              location:
                type: string
                description: Location of the parameter
                example: body
    RateLimitError:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: 'Too many requests, please try again later.'
        error:
          type: object
          properties:
            code:
              type: string
              example: RATE_LIMIT_EXCEEDED
            limit:
              type: integer
              example: 100
            remaining:
              type: integer
              example: 0
            resetTime:
              type: string
              format: date-time
              example: '2025-12-13T10:00:00.000Z'
            retryAfter:
              type: integer
              example: 30
  headers:
    RateLimitLimit:
      description: The maximum number of requests allowed in the current window
      schema:
        type: integer
    RateLimitRemaining:
      description: The number of requests remaining in the current window
      schema:
        type: integer
    RateLimitReset:
      description: The UTC date/time when the window resets
      schema:
        type: string
        format: date-time
    RetryAfter:
      description: The number of seconds to wait before retrying
      schema:
        type: integer
  securitySchemes:
    AdminEmail:
      type: apiKey
      in: header
      name: admin-email
      description: Admin email for authentication
    AdminPassword:
      type: apiKey
      in: header
      name: admin-password
      description: Admin password for authentication
    HmacSignature:
      type: apiKey
      in: header
      name: X-Signature
      description: |
        HMAC-SHA256 signature of the request.
        Format: Hex encoded string.
        Construction: `hmac_sha256(secret_key, url + body_json_string + timestamp)`
    HmacTimestamp:
      type: apiKey
      in: header
      name: X-Timestamp
      description: |
        Current Unix timestamp in milliseconds.
        Must be within 5 minutes of server time.
security:
  - HmacSignature: []
    HmacTimestamp: []
